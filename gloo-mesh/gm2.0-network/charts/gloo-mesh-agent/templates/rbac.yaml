# Code generated by skv2. DO NOT EDIT.


# Rbac manifests for gloo-mesh-agent

{{- $glooMeshAgent := $.Values.glooMeshAgent}}
{{- if $glooMeshAgent.enabled }}
---

kind: ClusterRole
apiVersion: rbac.authorization.k8s.io/v1
metadata:
  name: gloo-mesh-agent
  labels:
    app: gloo-mesh-agent
rules:
- apiGroups:
  - ""
  resources:
  - configmaps
  - namespaces
  - nodes
  - pods
  - services
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - apps
  resources:
  - daemonsets
  - deployments
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - ""
  resources:
  - configmaps/status
  - namespaces/status
  - nodes/status
  - pods/status
  - services/status
  verbs:
  - get
  - update
- apiGroups:
  - apps
  resources:
  - daemonsets/status
  - deployments/status
  verbs:
  - get
  - update
- apiGroups:
  - ""
  resources:
  - secrets
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - admin.gloo.solo.io
  resources:
  - kubernetesclusters
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - ""
  resources:
  - secrets/status
  verbs:
  - get
  - update
- apiGroups:
  - admin.gloo.solo.io
  resources:
  - kubernetesclusters/status
  verbs:
  - get
  - update
- apiGroups:
  - ""
  resources:
  - namespaces
  - secrets
  - serviceaccounts
  - services
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - admin.gloo.solo.io
  resources:
  - dashboards
  - extauthservers
  - kubernetesclusters
  - ratelimitserverconfigs
  - ratelimitserversettings
  - roottrustpolicies
  - workspaces
  - workspacesettings
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - apps
  resources:
  - daemonsets
  - deployments
  - replicasets
  - statefulsets
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - extensions.policy.gloo.solo.io
  resources:
  - wasmdeploymentpolicies
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - internal.gloo.solo.io
  resources:
  - discoveredcnis
  - discoveredgateways
  - meshes
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - networking.gloo.solo.io
  resources:
  - externalendpoints
  - externalservices
  - routetables
  - virtualdestinations
  - virtualgateways
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - observability.policy.gloo.solo.io
  resources:
  - accesslogpolicies
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - resilience.policy.gloo.solo.io
  resources:
  - failoverpolicies
  - faultinjectionpolicies
  - outlierdetectionpolicies
  - retrytimeoutpolicies
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - security.policy.gloo.solo.io
  resources:
  - accesspolicies
  - corspolicies
  - csrfpolicies
  - extauthpolicies
  - jwtpolicies
  - wafpolicies
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - trafficcontrol.policy.gloo.solo.io
  resources:
  - headermanipulationpolicies
  - mirrorpolicies
  - proxyprotocolpolicies
  - ratelimitclientconfigs
  - ratelimitpolicies
  - transformationpolicies
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - ""
  resources:
  - namespaces/status
  - secrets/status
  - serviceaccounts/status
  - services/status
  verbs:
  - get
  - update
- apiGroups:
  - admin.gloo.solo.io
  resources:
  - dashboards/status
  - extauthservers/status
  - kubernetesclusters/status
  - ratelimitserverconfigs/status
  - ratelimitserversettings/status
  - roottrustpolicies/status
  - workspaces/status
  - workspacesettings/status
  verbs:
  - get
  - update
- apiGroups:
  - apps
  resources:
  - daemonsets/status
  - deployments/status
  - replicasets/status
  - statefulsets/status
  verbs:
  - get
  - update
- apiGroups:
  - extensions.policy.gloo.solo.io
  resources:
  - wasmdeploymentpolicies/status
  verbs:
  - get
  - update
- apiGroups:
  - internal.gloo.solo.io
  resources:
  - discoveredcnis/status
  - discoveredgateways/status
  - meshes/status
  verbs:
  - get
  - update
- apiGroups:
  - networking.gloo.solo.io
  resources:
  - externalendpoints/status
  - externalservices/status
  - routetables/status
  - virtualdestinations/status
  - virtualgateways/status
  verbs:
  - get
  - update
- apiGroups:
  - observability.policy.gloo.solo.io
  resources:
  - accesslogpolicies/status
  verbs:
  - get
  - update
- apiGroups:
  - resilience.policy.gloo.solo.io
  resources:
  - failoverpolicies/status
  - faultinjectionpolicies/status
  - outlierdetectionpolicies/status
  - retrytimeoutpolicies/status
  verbs:
  - get
  - update
- apiGroups:
  - security.policy.gloo.solo.io
  resources:
  - accesspolicies/status
  - corspolicies/status
  - csrfpolicies/status
  - extauthpolicies/status
  - jwtpolicies/status
  - wafpolicies/status
  verbs:
  - get
  - update
- apiGroups:
  - trafficcontrol.policy.gloo.solo.io
  resources:
  - headermanipulationpolicies/status
  - mirrorpolicies/status
  - proxyprotocolpolicies/status
  - ratelimitclientconfigs/status
  - ratelimitpolicies/status
  - transformationpolicies/status
  verbs:
  - get
  - update
- apiGroups:
  - ""
  resources:
  - secrets
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - extauth.solo.io
  resources:
  - authconfigs
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - internal.gloo.solo.io
  resources:
  - issuedcertificates
  - xdsconfigs
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - networking.istio.io
  resources:
  - destinationrules
  - envoyfilters
  - gateways
  - serviceentries
  - sidecars
  - virtualservices
  - workloadentries
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - networking.k8s.io
  resources:
  - networkpolicies
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - ratelimit.solo.io
  resources:
  - ratelimitconfigs
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - security.istio.io
  resources:
  - authorizationpolicies
  - peerauthentications
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - ""
  resources:
  - secrets/status
  verbs:
  - get
  - update
- apiGroups:
  - extauth.solo.io
  resources:
  - authconfigs/status
  verbs:
  - get
  - update
- apiGroups:
  - internal.gloo.solo.io
  resources:
  - issuedcertificates/status
  - xdsconfigs/status
  verbs:
  - get
  - update
- apiGroups:
  - networking.istio.io
  resources:
  - destinationrules/status
  - envoyfilters/status
  - gateways/status
  - serviceentries/status
  - sidecars/status
  - virtualservices/status
  - workloadentries/status
  verbs:
  - get
  - update
- apiGroups:
  - networking.k8s.io
  resources:
  - networkpolicies/status
  verbs:
  - get
  - update
- apiGroups:
  - ratelimit.solo.io
  resources:
  - ratelimitconfigs/status
  verbs:
  - get
  - update
- apiGroups:
  - security.istio.io
  resources:
  - authorizationpolicies/status
  - peerauthentications/status
  verbs:
  - get
  - update
- apiGroups:
  - ""
  resources:
  - configmaps
  - namespaces
  - secrets
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - apps
  resources:
  - daemonsets
  - deployments
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - internal.gloo.solo.io
  resources:
  - issuedcertificates
  - meshes
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - ""
  resources:
  - configmaps/status
  - namespaces/status
  - secrets/status
  verbs:
  - get
  - update
- apiGroups:
  - apps
  resources:
  - daemonsets/status
  - deployments/status
  verbs:
  - get
  - update
- apiGroups:
  - internal.gloo.solo.io
  resources:
  - issuedcertificates/status
  - meshes/status
  verbs:
  - get
  - update
- apiGroups:
  - ""
  resources:
  - configmaps
  - pods
  - secrets
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - internal.gloo.solo.io
  resources:
  - podbouncedirectives
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - ""
  resources:
  - configmaps/status
  - pods/status
  - secrets/status
  verbs:
  - get
  - update
- apiGroups:
  - internal.gloo.solo.io
  resources:
  - podbouncedirectives/status
  verbs:
  - get
  - update
- apiGroups:
  - internal.gloo.solo.io
  resources:
  - xdsconfigs
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - internal.gloo.solo.io
  resources:
  - xdsconfigs/status
  verbs:
  - get
  - update
- apiGroups:
  - internal.gloo.solo.io
  resources:
  - certificaterequests
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - internal.gloo.solo.io
  resources:
  - certificaterequests/status
  verbs:
  - get
  - update
- apiGroups:
  - internal.gloo.solo.io
  resources:
  - certificaterequests
  - discoveredcnis
  - discoveredgateways
  - issuedcertificates
  - meshes
  - podbouncedirectives
  - xdsconfigs
  verbs:
  - '*'
- apiGroups:
  - ""
  resources:
  - secrets
  verbs:
  - '*'
- apiGroups:
  - internal.gloo.solo.io
  resources:
  - certificaterequests
  - podbouncedirectives
  verbs:
  - '*'
- apiGroups:
  - ""
  resources:
  - configmaps
  - pods
  - secrets
  verbs:
  - '*'
- apiGroups:
  - internal.gloo.solo.io
  resources:
  - podbouncedirectives
  verbs:
  - '*'
- apiGroups:
  - ""
  resources:
  - secrets
  verbs:
  - '*'
- apiGroups:
  - extauth.solo.io
  resources:
  - authconfigs
  verbs:
  - '*'
- apiGroups:
  - internal.gloo.solo.io
  resources:
  - issuedcertificates
  - xdsconfigs
  verbs:
  - '*'
- apiGroups:
  - networking.istio.io
  resources:
  - destinationrules
  - envoyfilters
  - gateways
  - serviceentries
  - sidecars
  - virtualservices
  - workloadentries
  verbs:
  - '*'
- apiGroups:
  - networking.k8s.io
  resources:
  - networkpolicies
  verbs:
  - '*'
- apiGroups:
  - ratelimit.solo.io
  resources:
  - ratelimitconfigs
  verbs:
  - '*'
- apiGroups:
  - security.istio.io
  resources:
  - authorizationpolicies
  - peerauthentications
  verbs:
  - '*'
- apiGroups:
  - ""
  resources:
  - secrets
  verbs:
  - '*'
- apiGroups:
  - ""
  resources:
  - namespaces
  - services
  - serviceaccounts
  - configmaps
  verbs:
  - '*'
- apiGroups:
  - apps
  resources:
  - deployments
  verbs:
  - '*'
- apiGroups:
  - apiextensions.k8s.io
  resources:
  - customresourcedefinitions
  verbs:
  - '*'
- apiGroups:
  - rbac.authorization.k8s.io
  resources:
  - clusterroles
  - clusterrolebindings
  verbs:
  - '*'
- apiGroups:
  - coordination.k8s.io
  resources:
  - leases
  verbs:
  - '*'
- apiGroups:
  - rbac.authorization.k8s.io
  resources:
  - roles
  - rolebindings
  - clusterroles
  - clusterrolebindings
  verbs:
  - get
  - list
  - watch

---

kind: ClusterRoleBinding
apiVersion: rbac.authorization.k8s.io/v1
metadata:
  name: gloo-mesh-agent
  labels:
    app: gloo-mesh-agent
subjects:
- kind: ServiceAccount
  name: gloo-mesh-agent
  namespace: {{ .Release.Namespace }}
roleRef:
  kind: ClusterRole
  name: gloo-mesh-agent
  apiGroup: rbac.authorization.k8s.io

{{- end }}